<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf8">
        <script type="text/javascript" src="libmdb.js"></script>
    </head>
    <body>
        <h1>Test</h1>

        <input id="loader" type="file" />
        <button onclick="javascript:load()">Load</button>
        <button onclick="javascript:download()">Download</button>
    </body>
</html>
<script>
    function load() {
        const input = document.querySelector('input[type="file"]');
        const file = input.files[0];

        const reader = new FileReader();
        reader.onload = function (e) {
            window.buf = e.target.result;
            FS.writeFile("/tmp/table.mdb", new Uint8Array(buf));
            window.mdb = new Module.Mdb("/tmp/table.mdb");        
            console.log("Loaded");
        }

        reader.readAsArrayBuffer(file);
    }

    function download() {
        const input = document.querySelector('input[type="file"]');
        const loadedFile = input.files[0];
        window.mdb.save();

        const data = FS.readFile("/tmp/table.mdb");
        const blob = new Blob([data], {
            type: "application/msaccess"
        });
        const url = URL.createObjectURL(blob);

        let a = document.createElement("a");
        a.style = "display: none";
        document.body.appendChild(a);

        a.href = url;
        a.download = loadedFile.name;
        a.click();

        URL.revokeObjectURL(url);
        document.body.removeChild(a);
    }
</script>